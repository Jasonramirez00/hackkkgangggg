<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>GAMES FOR PRIZES FREE MONEY</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #fff; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="640" height="380" style="margin-top: 60px;"></canvas>

<script>
	var canvas = document.getElementById("myCanvas");
	var ctx = canvas.getContext("2d");
	var ballRadius = 10;
	
	var playerHeight = 30;
	var playerWidth = 30;
	var playerX = 10;
    var playerY = 10;
	var moveSpeed = 4;
	
	// User Input
	var rightPressed = false;
	var leftPressed = false;
    var upPressed = false;
    var downPressed = false;
    var moveAllow = [true, true, true, true];
    
    var level = 0;

	
	function drawPlayer() {
	    ctx.beginPath();
        ctx.fillStyle = "#0095DD";
	    ctx.fillRect(playerX, playerY, playerWidth, playerHeight);
	    ctx.closePath();
	}
    
    var killWall = function(x,y,w,h){
        ctx.fillStyle = "#ff0000";
        ctx.fillRect(x,y,w,h);
        var rightEdge = playerX + playerWidth;
        var leftEdge = playerX;
        var topEdge = playerY;
        var bottomEdge = playerY + playerHeight;
        
        if (rightEdge > x && leftEdge < x + w && topEdge < y + h && bottomEdge > y){
            //if (level === 2){
            //    charPos = [30, 105];
            //} else {
            //    playerX = 0;
            //    playerY = 0;
            //}
            playerX = 10;
            playerY = 10;
        }
    } 
    
    var wall = function(x,y,w,h){
        ctx.fillStyle = "#0095DD";
        ctx.fillRect(x,y,w,h);
        var rightEdge = playerX + playerWidth;
        var leftEdge = playerX;
        var topEdge = playerY;
        var bottomEdge = playerY + playerHeight;
        
        if (rightEdge >= x && leftEdge < x && bottomEdge > y + moveSpeed && topEdge < y + h - moveSpeed){
            moveAllow[3] = false;
            playerX = x - playerWidth;
        } if (leftEdge <= x + w && rightEdge > x + w && bottomEdge > y + moveSpeed && topEdge < y + h - moveSpeed){
            moveAllow[2] = false;
            playerX = x + w;
        } if (topEdge <= y + h && bottomEdge > y + h && rightEdge > x + moveSpeed && leftEdge < x + w - moveSpeed){
            moveAllow[0] = false;
            playerY = y + h;
        } if (bottomEdge >= y && topEdge < y && rightEdge > x + moveSpeed && leftEdge < x + w - moveSpeed){
            moveAllow[1] = false;
            playerY = y - playerHeight;
        }
    }
    
    var goal = function(x,y,w,h){
        ctx.fillStyle = "#00ff00";
        ctx.fillRect(x,y,w,h);
        var rightEdge = playerX + playerWidth;
        var leftEdge = playerX;
        var topEdge = playerY;
        var bottomEdge = playerY + playerHeight;
        if (rightEdge > x && leftEdge < x + w && topEdge < y + h && bottomEdge > y){
            if (level === 'menu'){
                level = 0;
            } else {
                level += 1;
            }
            if (level === 2){
                charPos = [30, 105];
            } else {
                charPos = [25, 25];
            }
        }
    }
	
	function collisionDetection() {
	    for(c=0; c < brickColumnCount; c++) {
	        for(r=0; r < brickRowCount; r++) {
	            var b = bricks[c][r];
	            if(b.status == 1) {
	                if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {
	                    dy = -dy;
	                    b.status = 0;
	                }
	            }
	        }
	    }
	}
	
	function draw() {
	    ctx.clearRect(0, 0, canvas.width, canvas.height);
		drawPlayer();
        moveAllow = [true, true, true, true];
        if (level == 0) {
            //wall(150, 99, 24, 225);
            killWall(75, 150, 25, 300);
            killWall(200, 0, 25, 300);
            killWall(300, 150, 25, 300);
            killWall(400, 0, 25, 300);
            killWall(525, 150, 25, 300);
            goal(canvas.width - 50, 0, 50, 50);
            
            // Border
            wall(0, 0, 5, canvas.height);
            wall(0, 0, canvas.width, 5);
            wall(canvas.width - 5, 0, 5, canvas.height);
            wall(0, canvas.height - 5, canvas.width, 5);
        }

        
		if(upPressed && playerY > 0 && moveAllow[0]) {
		    playerY -= moveSpeed;
            if (playerY < 0) playerY = 0;
		}
        else if(downPressed && playerY < canvas.height - playerHeight && moveAllow[1]) {
		    playerY += moveSpeed;
            if (playerY > canvas.height - playerHeight) playerY = canvas.height - playerHeight;
		}
        if(leftPressed && playerX > 0 && moveAllow[2]) {
		    playerX -= moveSpeed;
            if (playerX < 0) playerX = 0;
		}
		else if(rightPressed && playerX < canvas.width - playerWidth && moveAllow[3]) {
			playerX += moveSpeed;
            if (playerX > canvas.width - playerWidth) playerX = canvas.width - playerWidth;
		}
		
        
        
		
        requestAnimationFrame(draw);

	}
	
	document.addEventListener("keydown", keyDownHandler, false);
	document.addEventListener("keyup", keyUpHandler, false);
	function keyDownHandler(e) {
	    if(e.keyCode == 39) {
	        rightPressed = true;
	    }
	    else if(e.keyCode == 37) {
	        leftPressed = true;
	    }
        else if (e.keyCode == 38) {
            upPressed = true;
        }
        else if (e.keyCode == 40) {
            downPressed = true;
        }
	}
	
	function keyUpHandler(e) {
		if(e.keyCode == 39) {
			rightPressed = false;
		}
		else if(e.keyCode == 37) {
			leftPressed = false;
		}
        else if(e.keyCode == 38) {
			upPressed = false;
		}
        else if(e.keyCode == 40) {
			downPressed = false;
		}
	}
    draw();
    
</script>

</body>
</html>
